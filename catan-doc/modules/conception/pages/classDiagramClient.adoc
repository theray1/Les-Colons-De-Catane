@startuml
package client {
    package core {
        package game {
        	   interface Player{}
            interface GameFacade {
	        	trade(Player, Resource[], Player, Resource[]) : void
	        	addResourcesTo(Player, Resource[]) : void
	        	removeResourcesTo(Player, Resource[]) : void
            }
        }
        
        package observer{
        	interface Observable{
        		addObserver(Observer) : void
        		removeObserver(Observer) : void
        		notifyObservers() : void
        	}
        	interface Observer{
        		update() : void
        	}
        }
        package commands {
            interface CommandGameFactory {
            	createCommand_ActivateThieve(Player[]) : Command
            	createCommand_MoveThieve(Player[], Coordinates) : Command
            	createCommand_Ping(Player[]) : Command
            	createCommand_Build(Player[], Building) : Command
            	createCommand_ActiveCard(Player[], Card) : Command
            	createCommand_AddCard(Player[], Player, Integer) : Command
            	createCommand_BuyCard(Player[], Resource[]) : Command
            	createCommand_EndTour(Player[], Player) : Command
            	createCommand_TradeWithNonPlayerEntity(Player, Resource[], Resource[] ) : Command
            	createCommand_TradeWithPlayer(Player, Resource[], Player, Resource[]) : Command
            	createCommand_DenyTrade(Player, Player) : Command
            	createCommand_AcceptTrade(Player, Player) : Command
            }
            interface Command {
                execute(): void
                getRecipients() : Player[]
            }

            interface Serializer {
                serialize(Command): String
                deSerialize(String): Command
            }
        }

        package networking {
            interface ConnectionHandler {
                sendCommand(Command): void
                isEnabled(): Boolean
                addServer(Login) : void
            }
        }

        package controler {
            interface NetworkControler {
            	sendCommand(Command) : void
            	addServer(Login) : void
            }
            note right: Network management "module"

            interface GameControler{
                receiveCommand(Command): void
                addServer(Login) : void
                
            	do_ActivateThieve() : void
            	do_MoveThieve() : void
            	do_Ping() : void
            	do_Build() : void
            	do_ActiveCard() : void
            	do_AddCard() : void
            	do_BuyCard() : void
            	do_EndTour() : void
				do_TradeWithNonPlayerEntity() : void
            	do_TradeWithPlayer() : void
            	do_DenyTrade() : void
            	do_AcceptTrade() : void
            }

        }

    }
      
    package clientImpl {
        package commandsImpl {
            class SerializerImpl <<Serializer>>{}
            abstract CommandAbstract <<Command>>{
            }
            note right of CommandAbstract
            		Represent all types of commands.
            end note
            class CommandGameFactoryImpl <<CommandGameFactory>>{}

            CommandAbstract *-up- "1-4"  Player
        }

        package networkingImpl {
            class WebSocketAdapterImpl <<ConnectionHandler>>{
               server: Socket
            }
            class NetworkControlerImpl <<NetworkControler>>{}

            
            NetworkControlerImpl *-up- ConnectionHandler
		   
        }
        package controlerImpl {

            class GameControlerImpl <<GameControler>><<Observable>>{
                me : Player
                commands: Command[]
            }
            GameControlerImpl *-up- "1" CommandGameFactory
            GameControlerImpl *-up- "1" NetworkControler
            GameControlerImpl *-up- "1" GameFacade
            GameControlerImpl *-up- "1" Serializer
            GameControlerImpl *-up- "*" Observer
            GameControlerImpl *-up- "3-4" Player
            
        }
    }
 
    
    package managment{
    	package api{
    		interface CommandLoginFactory{
	    		createCommandLogin(Content) : Command
	    	}
	    	note right : The login of the server
    	}
    	
    	package managmentImpl{
    		class CommandLoginFactoryWebSocket <<CommandLoginFactory>>{}
    		
		    
		    class ClientGameManager{
		    	createTheParty() : void
		    	connectServer(Command) : void
		    }
			
		    class Client {
		        main(): void
		    }
		    
		    ClientGameManager "1" *-up- "*" GameControler
		    ClientGameManager "1" *-up- "1" CommandLoginFactory
		    Client "1" *-up- "1" ClientGameManager
    	}
    
    }
        
        
    package ui{
    	class WindowObserverImpl <<Observer>>{}
    }

}
@enduml
