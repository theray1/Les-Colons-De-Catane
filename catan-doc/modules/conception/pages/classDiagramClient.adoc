@startuml
package client {
    package core {
        package game {
        	   interface Player{}
            interface GameFacade {
	        	trade(Player, Resource[], Player, Resource[]) : void
	        	addResourcesTo(Player, Resource[]) : void
	        	removeResourcesTo(Player, Resource[]) : void
            }
        }
        package commands {
            interface CommandGameFactory {
            	ActivateThieve(Player[]) : Command
            	MoveThieve(Player[], Coordinates) : Command
            	Ping(Player[]) : Command
            	Build(Player[], Building) : Command
            	ActiveCard(Player[], Card) : Command
            	AddCard(Player[], Player, Integer) : Command
            	BuyCard(Player[], Resource[]) : Command
            	StartTurn(Player[], Player) : Command
            	EndTurn(Player[], Player) : Command
            	TradeWithNonPlayerEntity(Player, Resource[], Resource[] ) : Command
            	TradeWithPlayer(Player, Resource[], Player, Resource[]) : Command
            	DenyTrade(Player, Player) : Command
            	AcceptTrade(Player, Player) : Command
            }
            interface Command {
                execute(): void
                getRecipients() : Player[]
            }

            interface Serializer {
                serialize(Command): String
                deSerialize(String): Command
            }
        }

        package networking {
            interface ConnectionHandler {
                sendCommand(Command): void
                isEnabled(): Boolean
                addServer(Login) : void
            }
        }

        package controler {
            interface NetworkControler {
            	sendCommand(Command) : void
            	addServer(Login) : void
            }
            note right: Network management "module"

            interface GameControler{
                receiveCommand(Command): void
                addServer(Login) : void
                
            	ActivateThieve() : void
            	MoveThieve() : void
            	Ping() : void
            	Build() : void
            	ActiveCard() : void
            	AddCard() : void
            	BuyCard() : void
            	EndTour() : void
			TradeWithNonPlayerEntity() : void
            	TradeWithPlayer() : void
            	DenyTrade() : void
            	AcceptTrade() : void
            }

        }

    }
      
    package clientImpl {
        package commandsImpl {
            class SerializerImpl <<Serializer>>{}
            abstract CommandAbstract <<Command>>{
            }
            note right of CommandAbstract
            		Represent all types of commands.
            end note
            class CommandGameFactoryImpl <<CommandGameFactory>>{}

            CommandAbstract *-up- "1-4"  Player
        }

        package networkingImpl {
            class WebSocketAdapterImpl <<ConnectionHandler>>{
               server: Socket
            }
            class NetworkControlerImpl <<NetworkControler>>{}

            
            NetworkControlerImpl *-up- ConnectionHandler
		   
        }
        package controlerImpl {

            class GameControlerImpl <<GameControler>>{
                me : Player
                commands: Command[]
            }
            GameControlerImpl *-up- "1" CommandGameFactory
            GameControlerImpl *-up- "1" NetworkControler
            GameControlerImpl *-up- "1" GameFacade
            GameControlerImpl *-up- "1" Serializer
            GameControlerImpl *-up- "3-4" Player
            
        }
    }
 
    
    package managment{
    	package api{
    		interface CommandLoginFactory{
	    		createCommandLogin(Content) : Command
	    	}
	    	note right : The login of the server
    	}
    	
    	package managmentImpl{
    		class CommandLoginFactoryWebSocket <<CommandLoginFactory>>{}
    		
		    
		    class ClientGameManager{
		    	createTheParty() : void
		    	connectServer(Command) : void
		    }
			
		    class Client {
		        main(): void
		    }
		    
		    ClientGameManager "1" *-up- "*" GameControler
		    ClientGameManager "1" *-up- "1" CommandLoginFactory
		    Client "1" *-up- "1" ClientGameManager
    	}
    
    }


}
@enduml
